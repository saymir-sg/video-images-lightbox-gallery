<div class="lightbox-gallery-container" [class.fullscreen]="isFullScreen">
<div class="gallery">
  <ng-container *ngFor="let item of galleryData; let i = index;">
    <div class="gallery-item" [ngStyle]="{'width': slidesToShow ? (100 / slidesToShow + '%' ) : ''}" (click)="previewGalleryItem(i)">
      <ng-container *ngIf="item.type === 'image'">
        <img [src]="item.src" [alt]="item.alt" class="img-fluid" loading="lazy"/>
      </ng-container>
      <ng-container *ngIf="item.type === 'video'">
        <video controls preload="auto" controlsList="nodownload nofullscreen noremoteplayback">
          <source [src]="item.src" type="video/{{item.videoType}}" />
          Your browser does not support the video tag.
        </video>
      </ng-container>
    </div>
  </ng-container>
</div>
<div #lightboxGallery class="lightbox" *ngIf="showMask" animation-leave>
  <span *ngIf="showCount" class="count text-white">{{(currentIndex + 1) + '/' + totalItemsCount}}</span>
  <div class="right-toolbar">
    <button class="full-screen" title="Enter Full Screen" (click)="openFullscreen()">
      <svg *ngIf="!isFullScreen" width="20px" height="20px" viewBox="0 0 18 18"><path class="fslightbox-svg-path" d="M4.5 11H3v4h4v-1.5H4.5V11zM3 7h1.5V4.5H7V3H3v4zm10.5 6.5H11V15h4v-4h-1.5v2.5zM11 3v1.5h2.5V7H15V3h-4z"></path></svg>
    </button>
    <button *ngIf="isFullScreen" class="full-screen" title="Exit Full Screen" (click)="closeFullscreen()">
      <svg  width="24px" height="24px" viewBox="0 0 950 1024"><path class="fslightbox-svg-path" d="M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z"></path></svg>
    </button>
    <button class="close-btn text-white" (click)="onClosePreview()" title="Close">
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <button *ngIf="controls" class="btn-lighbox-carousel btn-prev text-white" (click)="onPrev()" title="Prev">
    <i class="fa-solid fa-arrow-left"></i>
  </button>
  <button *ngIf="controls" class="btn-lighbox-carousel btn-next text-white" (click)="onNext()" title="Next">
    <i class="fa-solid fa-arrow-right"></i>
  </button>
  <div class="lighbox-item" *ngIf="previewVisible"
  [@animation]="{value: 'visible'}"
  (@animation.done)="onAnimationEnd($event)"
  >
    <img *ngIf="currentLightboxItem.type === 'image'"
     [src]="currentLightboxItem.src" [alt]="currentLightboxItem.alt" loading="lazy" />
     <ng-container *ngIf="currentLightboxItem.type === 'video'">
        <video controls>
          <source [src]="currentLightboxItem.src" type="video/{{currentLightboxItem.videoType}}" />
          Your browser does not support the video tag.
        </video>
      </ng-container>
  </div>
</div>
</div>